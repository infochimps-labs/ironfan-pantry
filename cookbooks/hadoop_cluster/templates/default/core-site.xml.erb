<?xml version="1.0"?>
<?xml-stylesheet type="text/xsl" href="configuration.xsl"?>
<configuration>

<!-- about these variables: http://archive.cloudera.com/cdh/3/hadoop/core-default.html -->
<!-- generated by chef, changes will be overwritten -->
  
<property> <name>fs.default.name</name>              <value>hdfs://<%= @hadoop[:namenode][:addr] %>:<%= @hadoop[:namenode][:ipc_port] %>/</value></property>

<property> <name>fs.checkpoint.dir</name>            <value><%= @hadoop[:secondarynn][:data_dirs].join(",") %></value><final>true</final></property>
<property> <name>hadoop.tmp.dir</name>               <value><%= @hadoop[:tmp_dir] %>/hadoop-${user.name}</value> <final>true</final></property>

<property> <name>fs.trash.interval</name>            <value>1440</value> <final>true</final></property>
<property> <name>io.file.buffer.size</name>          <value>65536</value> </property>

<property> <name>io.compression.codecs</name> <value><%= @hadoop[:codecs].join "," %></value> </property>

<property> <name>io.compression.codec.lzo.class</name> <value>com.hadoop.compression.lzo.LzoCodec</value> </property>

<property> <name>webinterface.private.actions</name> <value>false</value> </property>

<property> <name>hadoop.rpc.socket.factory.class.default</name>               <value>org.apache.hadoop.net.StandardSocketFactory</value> <final>true</final></property>
<property> <name>hadoop.rpc.socket.factory.class.ClientProtocol</name>        <value></value> <final>true</final></property>
<property> <name>hadoop.rpc.socket.factory.class.JobSubmissionProtocol</name> <value></value> <final>true</final></property>

<%- unless @hadoop[:aws].nil? %>
<property> <name>fs.s3.awsAccessKeyId</name>         <value><%= @hadoop[:aws][:aws_access_key_id] %></value></property>
<property> <name>fs.s3n.awsAccessKeyId</name>        <value><%= @hadoop[:aws][:aws_access_key_id] %></value></property>
<property> <name>fs.s3.awsSecretAccessKey</name>     <value><%= @hadoop[:aws][:aws_secret_access_key] %></value></property>
<property> <name>fs.s3n.awsSecretAccessKey</name>    <value><%= @hadoop[:aws][:aws_secret_access_key] %></value></property>
<property> <name>fs.s3.block.size</name>             <value><%= @hadoop[:s3_block_size] %></value></property>
<property> <name>fs.s3n.block.size</name>            <value><%= @hadoop[:s3_block_size] %></value></property>
<%- end %>

<%- if @hadoop[:define_topology] %>
<property><name>topology.script.file.name</name>     <value><%= @hadoop[:conf_dir] %>/hadoop-topologizer.rb</value></property>
<property><name>topology.script.number.args</name>   <value>50</value></property>

<%- end %>

<property> <name>hadoop.proxyuser.hue.hosts</name> <value>*</value> </property>
<property> <name>hadoop.proxyuser.hue.groups</name> <value>*</value> </property>

</configuration>
